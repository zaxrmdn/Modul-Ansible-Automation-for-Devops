# Managing Single Server
<br><br>
### Discover host target
```
$ ansible centos -a "hostnamectl" -u centos -k
```
---
```
root@controller:~# ansible centos -a "hostnamectl" -u centos -k
SSH password:
10.23.1.69 | CHANGED | rc=0 >>
   Static hostname: target3
         Icon name: computer-vm
           Chassis: vm
        Machine ID: addea7717f5b4397951c6521bdee33be
           Boot ID: 2f409fd82ea54643b66d42c699ba7160
    Virtualization: vmware
  Operating System: CentOS Stream 8
       CPE OS Name: cpe:/o:centos:centos:8
            Kernel: Linux 4.18.0-408.el8.x86_64
      Architecture: x86-64
```
---
### Discover time target
```
$ ansible centos -a "timedatectl" -u centos -k
```
---
```
root@controller:~# ansible centos -a "timedatectl" -u centos -k
SSH password:
10.23.1.69 | CHANGED | rc=0 >>
               Local time: Wed 2023-02-22 15:13:51 WIB
           Universal time: Wed 2023-02-22 08:13:51 UTC
                 RTC time: Wed 2023-02-22 08:13:53
                Time zone: Asia/Jakarta (WIB, +0700)
System clock synchronized: no
              NTP service: n/a
          RTC in local TZ: no
```
---
### Monitoring using ansible
#### Check memori size
```
$ ansible centos -a "free -h" -u centos -k
```
---
```
root@controller:~# ansible centos -a "free -h" -u centos -k
SSH password:
10.23.1.69 | CHANGED | rc=0 >>
              total        used        free      shared  buff/cache   available
Mem:          3.6Gi       226Mi       3.1Gi       8.0Mi       377Mi       3.2Gi
Swap:         2.0Gi          0B       2.0Gi
```

#### Check disk
```
$ ansible centos -a "lsblk" -u centos -k
```
---
```
root@controller:~# ansible centos -a "lsblk" -u centos -k
SSH password:
10.23.1.69 | CHANGED | rc=0 >>
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda           8:0    0   20G  0 disk
├─sda1        8:1    0  600M  0 part /boot/efi
├─sda2        8:2    0    1G  0 part /boot
└─sda3        8:3    0 18.4G  0 part
  ├─cs-root 253:0    0 16.4G  0 lvm  /
  └─cs-swap 253:1    0    2G  0 lvm  [SWAP]
sr0          11:0    1 1024M  0 rom
```
#### Check free disk
```
$ ansible centos -a "df -h" -u centos -k
```
---
```
root@controller:~# ansible centos -a "df -h" -u centos -k
SSH password:
10.23.1.69 | CHANGED | rc=0 >>
Filesystem           Size  Used Avail Use% Mounted on
devtmpfs             1.9G     0  1.9G   0% /dev
tmpfs                1.9G     0  1.9G   0% /dev/shm
tmpfs                1.9G  8.6M  1.9G   1% /run
tmpfs                1.9G     0  1.9G   0% /sys/fs/cgroup
/dev/mapper/cs-root   17G  2.4G   15G  15% /
/dev/sda2           1014M  268M  747M  27% /boot
/dev/sda1            599M  7.3M  592M   2% /boot/efi
tmpfs                374M     0  374M   0% /run/user/1000
```
#### Check cpu
```
$ ansible centos -a "lscpu" -u centos -k
```
---
<br><br>
<br><br>
# Managing Multi Servers
<br><br>
### Discover multi host target
> Noted: Dibawah ini contoh manage multi servers , yang dimana untuk password root itu semua disamakan jadi ansible menggunakan password yang sama untuk semua target
```
$ ansible all -a "hostnamectl" -u root -k
```
---
```
root@controller:~# ansible all -a "hostnamectl" -u root -k
SSH password:
10.23.1.69 | CHANGED | rc=0 >>
   Static hostname: target3
         Icon name: computer-vm
           Chassis: vm
        Machine ID: addea7717f5b4397951c6521bdee33be
           Boot ID: 2f409fd82ea54643b66d42c699ba7160
    Virtualization: vmware
  Operating System: CentOS Stream 8
       CPE OS Name: cpe:/o:centos:centos:8
            Kernel: Linux 4.18.0-408.el8.x86_64
      Architecture: x86-64
10.23.1.15 | CHANGED | rc=0 >>
   Static hostname: target1
         Icon name: computer-vm
           Chassis: vm
        Machine ID: 4af1780ed1b645e6a6b65a142d138ed2
           Boot ID: 8f6fa964a4d14f84b1ffbcc14bce7a65
    Virtualization: vmware
  Operating System: Ubuntu 20.04.2 LTS
            Kernel: Linux 5.4.0-135-generic
      Architecture: x86-64
10.23.1.14 | CHANGED | rc=0 >>
   Static hostname: target2
         Icon name: computer-vm
           Chassis: vm
        Machine ID: 4f98f3fd23fd435c89b5e515de7feedf
           Boot ID: 16cb966310294774a699e775de5f6cc3
    Virtualization: vmware
  Operating System: Ubuntu 20.04.2 LTS
            Kernel: Linux 5.4.0-135-generic
      Architecture: x86-64
```
